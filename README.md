## Поварская книга на Django

### Стек технологий:

 - ![alt text](https://img.shields.io/badge/Python-3.11.5-grey?style=plastic&logo=python&logoColor=white&labelColor=%233776AB)

 - ![alt text](https://img.shields.io/badge/Django-5.0.1-grey?style=plastic&logo=django&logoColor=white&labelColor=%23092E20)

 - ![alt text](https://img.shields.io/badge/PostgreSQL-15.3-grey?style=plastic&logo=postgresql&logoColor=white&labelColor=%234169E1)

### Описание проекта
Реализована приложение поварской книги на Django, со следующим функционалом:  

#### База данных:

- В базе данных приложения должен храниться список продуктов.
- Продукт имеет название, а также целочисленное поле, хранящее информацию о том, сколько раз было приготовлено блюдо с использованием этого продукта.
- Также в базе данных хранятся рецепты блюд.
- Рецепт имеет название, а также набор входящих в рецепт продуктов, с указанием веса в граммах.

Например - рецепт Сырник, в который входят продукты Творог 200г, Яйцо 50г, Сахар 10г.

- Один и тот же продукт, может использоваться в разных рецептах.
- Один и тот же продукт не может быть использован в одном рецепте дважды.

#### Функционал:
Приложение должно предоставлять следующие HTTP функции, получающие параметры методом GET

-  add_product_to_recipe с параметрами recipe_id, product_id, weight. 
    - Функция добавляет к указанному рецепту указанный продукт с указанным весом.
    - Если в рецепте уже есть такой продукт, то функция должна поменять его вес в этом рецепте на указанный.
- cook_recipe c параметром recipe_id.
    - Функция увеличивает на единицу количество приготовленных блюд для каждого продукта, входящего в указанный рецепт.
- show_recipes_without_product с параметром product_id.
    - Функция возвращает HTML страницу, на которой размещена таблица.
    - В таблице отображены id и названия всех рецептов, в которых указанный продукт отсутствует, или присутствует в количестве меньше 10 грамм.
    - Страница должна генерироваться с использованием Django templates. Качество HTML верстки не оценивается.

Важно: указанные функции должны быть реализованы в разумной степени эффективно с точки зрения производительности, а также корректно работать в случае одновременного доступа нескольких пользователей.

#### Админка:
Также средствами Джанго должна быть настроена админка, где пользователь сможет управлять входящими в базу данных продуктами и рецептами. Для рецептов должна быть возможность редактировать входящие в их состав продукты и их вес в граммах.

### Для запуска через консоль необходимо:

 - Клонировать проект на собственный диск в новом каталоге
 - Создать виртуальное окружение
 - Установить зависимости командой:
```python
    pip install -r requirements.txt
```
 - Прописать переменные окружения в файле `.env.sample`
```dotenv
SECRET_KEY='Секретный ключ Django'
DEBUG='True/False', например: True

POSTGRES_DB_NAME='Название базы данных', например: 'name_of_db' или 'cookbook'
POSTGRES_DB_USER='Пользователь базы данных', например: 'db_user' или 'postgres'
POSTGRES_DB_PASSWORD='Пароль пользователя базы данных', например: 'your_password'
POSTGRES_DB_HOST='Хост базы данных', например: '127.0.0.1' или 'localhost' или 'db' (для Docker)
POSTGRES_DB_PORT='Порт базы данных', например: '5432'
```
 - Создать базу данных (в данной работе используется PostgreSQL)
```python
    psql -U postgres
    create database cookbook;
    \q
```
 - В терминале выполнить команды:
```python
    python manage.py migrate
```

 - Для создания тестового пользователя - администратор:
   - login: admin
   - password: admin 
```python
    python manage.py csu
```
 - Для запуска сервера через терминал
```python
    python manage.py runserver
```

### Для запуска через Docker необходимо:

 - происходит сборка образа контейнера согласно инструкции в файле Dockerfile
```python
    docker-compose build
```
 - происходит последовательный запуск всех контейнеров согласно инструкции в файле docker-compose.yaml
```python
    docker-compose up
```

### Для завершения работы необходимо:

 - Нажать комбинацию клавиш `CTRL + C` в окне терминала
